{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.accessTokenSignature = exports.requestTokenSignature = void 0;\n\nvar crypto_js_1 = require(\"crypto-js\");\n\nexports.requestTokenSignature = function (_a) {\n  var method = _a.method,\n      apiUrl = _a.apiUrl,\n      callbackUrl = _a.callbackUrl,\n      consumerKey = _a.consumerKey,\n      consumerSecret = _a.consumerSecret;\n  var params = {\n    oauth_consumer_key: consumerKey,\n    oauth_version: \"1.0\",\n    oauth_signature_method: \"HMAC-SHA1\",\n    oauth_callback: callbackUrl,\n    oauth_timestamp: (Date.now() / 1000).toFixed(),\n    oauth_nonce: Math.random().toString(36).replace(/[^a-z]/, \"\").substr(2)\n  };\n  return makeSignature(params, method, apiUrl, consumerSecret);\n};\n\nexports.accessTokenSignature = function (_a) {\n  var consumerKey = _a.consumerKey,\n      consumerSecret = _a.consumerSecret,\n      oauthToken = _a.oauthToken,\n      oauthVerifier = _a.oauthVerifier,\n      method = _a.method,\n      apiUrl = _a.apiUrl;\n  var params = {\n    oauth_consumer_key: consumerKey,\n    oauth_version: \"1.0\",\n    oauth_signature_method: \"HMAC-SHA1\",\n    oauth_token: oauthToken,\n    oauth_verifier: oauthVerifier,\n    oauth_timestamp: (Date.now() / 1000).toFixed(),\n    oauth_nonce: Math.random().toString(36).replace(/[^a-z]/, \"\").substr(2)\n  };\n  return makeSignature(params, method, apiUrl, consumerSecret);\n};\n\nvar makeSignature = function (params, method, apiUrl, consumerSecret) {\n  var paramsBaseString = Object.keys(params).sort().reduce(function (prev, el) {\n    return prev += \"&\" + el + \"=\" + params[el];\n  }, \"\").substr(1);\n  var signatureBaseString = method.toUpperCase() + \"&\" + encodeURIComponent(apiUrl) + \"&\" + encodeURIComponent(paramsBaseString);\n  var signingKey = encodeURIComponent(consumerSecret) + \"&\";\n  var oauth_signature = crypto_js_1.enc.Base64.stringify(crypto_js_1.HmacSHA1(signatureBaseString, signingKey));\n\n  var paramsWithSignature = __assign(__assign({}, params), {\n    oauth_signature: encodeURIComponent(oauth_signature)\n  });\n\n  return Object.keys(paramsWithSignature).sort().reduce(function (prev, el) {\n    return prev += \",\" + el + \"=\\\"\" + paramsWithSignature[el] + \"\\\"\";\n  }, \"\").substr(1);\n};","map":{"version":3,"sources":["../../src/services/signature.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.accessTokenSignature = exports.requestTokenSignature = void 0;\nvar crypto_js_1 = require(\"crypto-js\");\nexports.requestTokenSignature = function (_a) {\n    var method = _a.method, apiUrl = _a.apiUrl, callbackUrl = _a.callbackUrl, consumerKey = _a.consumerKey, consumerSecret = _a.consumerSecret;\n    var params = {\n        oauth_consumer_key: consumerKey,\n        oauth_version: \"1.0\",\n        oauth_signature_method: \"HMAC-SHA1\",\n        oauth_callback: callbackUrl,\n        oauth_timestamp: (Date.now() / 1000).toFixed(),\n        oauth_nonce: Math.random()\n            .toString(36)\n            .replace(/[^a-z]/, \"\")\n            .substr(2)\n    };\n    return makeSignature(params, method, apiUrl, consumerSecret);\n};\nexports.accessTokenSignature = function (_a) {\n    var consumerKey = _a.consumerKey, consumerSecret = _a.consumerSecret, oauthToken = _a.oauthToken, oauthVerifier = _a.oauthVerifier, method = _a.method, apiUrl = _a.apiUrl;\n    var params = {\n        oauth_consumer_key: consumerKey,\n        oauth_version: \"1.0\",\n        oauth_signature_method: \"HMAC-SHA1\",\n        oauth_token: oauthToken,\n        oauth_verifier: oauthVerifier,\n        oauth_timestamp: (Date.now() / 1000).toFixed(),\n        oauth_nonce: Math.random()\n            .toString(36)\n            .replace(/[^a-z]/, \"\")\n            .substr(2)\n    };\n    return makeSignature(params, method, apiUrl, consumerSecret);\n};\nvar makeSignature = function (params, method, apiUrl, consumerSecret) {\n    var paramsBaseString = Object.keys(params)\n        .sort()\n        .reduce(function (prev, el) {\n        return (prev += \"&\" + el + \"=\" + params[el]);\n    }, \"\")\n        .substr(1);\n    var signatureBaseString = method.toUpperCase() + \"&\" + encodeURIComponent(apiUrl) + \"&\" + encodeURIComponent(paramsBaseString);\n    var signingKey = encodeURIComponent(consumerSecret) + \"&\";\n    var oauth_signature = crypto_js_1.enc.Base64.stringify(crypto_js_1.HmacSHA1(signatureBaseString, signingKey));\n    var paramsWithSignature = __assign(__assign({}, params), { oauth_signature: encodeURIComponent(oauth_signature) });\n    return Object.keys(paramsWithSignature)\n        .sort()\n        .reduce(function (prev, el) {\n        return (prev += \",\" + el + \"=\\\"\" + paramsWithSignature[el] + \"\\\"\");\n    }, \"\")\n        .substr(1);\n};\n//# sourceMappingURL=signature.js.map"]},"metadata":{},"sourceType":"script"}