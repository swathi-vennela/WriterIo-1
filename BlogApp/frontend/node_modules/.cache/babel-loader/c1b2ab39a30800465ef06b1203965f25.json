{"ast":null,"code":"var _jsxFileName = \"/home/swathi_vennela/Documents/Dev/WriterIo-1/BlogApp/frontend/src/components/CreatePosts.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport CKEditor from \"@ckeditor/ckeditor5-react\";\nimport ClassicEditor from \"@ckeditor/ckeditor5-build-classic\";\nimport sanitizeHtml from \"sanitize-html\";\nconst baseURL = process.env.REACT_APP_BASEURL || \"http://localhost:5000\";\n\nclass CreatePosts extends Component {\n  constructor() {\n    super();\n    this.state = {\n      title: \"\",\n      body: \"\",\n      author: \"\",\n      date: new Date(),\n      isLoggedIn: false\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleEditorChange = this.handleEditorChange.bind(this);\n  } // Set author name from logged in user's profile\n\n\n  componentDidMount() {\n    if (sessionStorage.getItem(\"isLoggedIn\") === \"true\") {\n      this.setState({\n        author: sessionStorage.getItem(\"username\"),\n        isLoggedIn: true\n      });\n    }\n  }\n\n  handleEditorChange(event, editor) {\n    const data = editor.getData();\n    this.setState({\n      body: data\n    });\n  }\n\n  handleChange(event) {\n    const {\n      name,\n      value\n    } = event.target;\n    this.setState({\n      [name]: value\n    });\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n    this.setState({\n      date: new Date()\n    }); // sanitize data before setting state\n\n    const sanitizedData = sanitizeHtml(this.state.body.trim()); // If the post body is too less, do not submit\n\n    if (sanitizedData.length < 400) {\n      alert(\"Cannot submit such a short post!\");\n    } else {\n      // Display a spinner until the post is submitted\n      document.querySelector(\".spinner-container\").style.display = \"flex\";\n      this.setState({\n        body: sanitizedData\n      });\n      const Blog = {\n        title: this.state.title,\n        author: this.state.author,\n        body: this.state.body,\n        date: this.state.date\n      };\n      axios.post(`${baseURL}/server/posts/create/`, Blog).then(res => window.location = \"/posts\").catch(err => console.log(err));\n    }\n  }\n\n  render() {\n    if (this.state.isLoggedIn) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"spinner-container\",\n        style: {\n          display: \"none\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"spinner-border\",\n        role: \"status\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"sr-only\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 29\n        }\n      }, \"Loading...\"))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"new-post\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 25\n        }\n      }, \"Create New Blog Post\", /*#__PURE__*/React.createElement(\"span\", {\n        className: \"full-stop\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 29\n        }\n      }, \".\")), /*#__PURE__*/React.createElement(\"form\", {\n        onSubmit: this.handleSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        className: \"new-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 33\n        }\n      }, \"Title: \"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control new-title\",\n        type: \"text\",\n        name: \"title\",\n        value: this.state.title,\n        onChange: this.handleChange,\n        required: true,\n        placeholder: \"The Best Title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 33\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(CKEditor, {\n        editor: ClassicEditor,\n        onChange: this.handleEditorChange,\n        config: {\n          placeholder: \"Start typing your blog post here...\",\n          toolbar: [\"Heading\", \"|\", \"Bold\", \"Italic\", \"Link\", \"NumberedList\", \"BulletedList\", \"|\", \"BlockQuote\", \"MediaEmbed\", \"Undo\", \"Redo\"]\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 33\n        }\n      })), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 29\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"submit\",\n        value: \"Create Post\",\n        className: \"btn btn-outline-primary btn-lg\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 33\n        }\n      })))));\n    } else {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"alert alert-warning\",\n        role: \"alert\",\n        onClick: () => window.location = \"/login\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 17\n        }\n      }, \"You need to login to create a new post!\", /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"close\",\n        \"data-dismiss\": \"alert\",\n        \"aria-label\": \"Close\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        \"aria-hidden\": \"true\",\n        className: \"alert-close\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 25\n        }\n      }, \"\\xD7\", \" \")));\n    }\n  }\n\n}\n\nexport default CreatePosts;","map":{"version":3,"sources":["/home/swathi_vennela/Documents/Dev/WriterIo-1/BlogApp/frontend/src/components/CreatePosts.js"],"names":["React","Component","axios","CKEditor","ClassicEditor","sanitizeHtml","baseURL","process","env","REACT_APP_BASEURL","CreatePosts","constructor","state","title","body","author","date","Date","isLoggedIn","handleChange","bind","handleSubmit","handleEditorChange","componentDidMount","sessionStorage","getItem","setState","event","editor","data","getData","name","value","target","preventDefault","sanitizedData","trim","length","alert","document","querySelector","style","display","Blog","post","then","res","window","location","catch","err","console","log","render","placeholder","toolbar"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport CKEditor from \"@ckeditor/ckeditor5-react\";\nimport ClassicEditor from \"@ckeditor/ckeditor5-build-classic\";\nimport sanitizeHtml from \"sanitize-html\";\n\nconst baseURL = process.env.REACT_APP_BASEURL || \"http://localhost:5000\";\n\nclass CreatePosts extends Component {\n    constructor() {\n        super();\n\n        this.state = {\n            title: \"\",\n            body: \"\",\n            author: \"\",\n            date: new Date(),\n            isLoggedIn: false,\n        };\n\n        this.handleChange = this.handleChange.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n        this.handleEditorChange = this.handleEditorChange.bind(this);\n    }\n\n    // Set author name from logged in user's profile\n    componentDidMount() {\n        if (sessionStorage.getItem(\"isLoggedIn\") === \"true\") {\n            this.setState({\n                author: sessionStorage.getItem(\"username\"),\n                isLoggedIn: true,\n            });\n        }\n    }\n\n    handleEditorChange(event, editor) {\n        const data = editor.getData();\n        this.setState({ body: data });\n    }\n\n    handleChange(event) {\n        const { name, value } = event.target;\n\n        this.setState({\n            [name]: value,\n        });\n    }\n\n    handleSubmit(event) {\n        event.preventDefault();\n\n        this.setState({ date: new Date() });\n\n        // sanitize data before setting state\n        const sanitizedData = sanitizeHtml(this.state.body.trim());\n\n        // If the post body is too less, do not submit\n        if (sanitizedData.length < 400) {\n            alert(\"Cannot submit such a short post!\");\n        } else {\n            // Display a spinner until the post is submitted\n            document.querySelector(\".spinner-container\").style.display = \"flex\";\n\n            this.setState({ body: sanitizedData });\n\n            const Blog = {\n                title: this.state.title,\n                author: this.state.author,\n                body: this.state.body,\n                date: this.state.date,\n            };\n\n            axios\n                .post(`${baseURL}/server/posts/create/`, Blog)\n                .then((res) => (window.location = \"/posts\"))\n                .catch((err) => console.log(err));\n        }\n    }\n\n    render() {\n        if (this.state.isLoggedIn) {\n            return (\n                <div>\n                    {/* A spinner to indicate loading until new post is submitted */}\n                    <div\n                        className=\"spinner-container\"\n                        style={{ display: \"none\" }}\n                    >\n                        <div className=\"spinner-border\" role=\"status\">\n                            <span className=\"sr-only\">Loading...</span>\n                        </div>\n                    </div>\n\n                    <div className=\"new-post\">\n                        <h1>\n                            Create New Blog Post\n                            <span className=\"full-stop\">.</span>\n                        </h1>\n                        <form onSubmit={this.handleSubmit}>\n                            <div className=\"form-group\">\n                                <label className=\"new-title\">Title: </label>\n                                <input\n                                    className=\"form-control new-title\"\n                                    type=\"text\"\n                                    name=\"title\"\n                                    value={this.state.title}\n                                    onChange={this.handleChange}\n                                    required\n                                    placeholder=\"The Best Title\"\n                                />\n                            </div>\n                            <div>\n                                <CKEditor\n                                    editor={ClassicEditor}\n                                    onChange={this.handleEditorChange}\n                                    config={{\n                                        placeholder:\n                                            \"Start typing your blog post here...\",\n                                        toolbar: [\n                                            \"Heading\",\n                                            \"|\",\n                                            \"Bold\",\n                                            \"Italic\",\n                                            \"Link\",\n                                            \"NumberedList\",\n                                            \"BulletedList\",\n                                            \"|\",\n                                            \"BlockQuote\",\n                                            \"MediaEmbed\",\n                                            \"Undo\",\n                                            \"Redo\",\n                                        ],\n                                    }}\n                                />\n                            </div>\n                            <br />\n                            <div className=\"form-group\">\n                                <input\n                                    type=\"submit\"\n                                    value=\"Create Post\"\n                                    className=\"btn btn-outline-primary btn-lg\"\n                                />\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            );\n        } else {\n            return (\n                <div\n                    className=\"alert alert-warning\"\n                    role=\"alert\"\n                    onClick={() => (window.location = \"/login\")}\n                >\n                    You need to login to create a new post!\n                    <button\n                        type=\"button\"\n                        className=\"close\"\n                        data-dismiss=\"alert\"\n                        aria-label=\"Close\"\n                    >\n                        <span aria-hidden=\"true\" className=\"alert-close\">\n                            &times;{\" \"}\n                        </span>\n                    </button>\n                </div>\n            );\n        }\n    }\n}\n\nexport default CreatePosts;\n"]},"metadata":{},"sourceType":"module"}